
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Document</title>
</head>

<body>
  <input type="date" id="date">
  <button onclick="myfunc()">Verify</button>
  <p id="demo"></p>

  <div class="container mt-3" id="display1">
    <div action="#" class="was-validated">
      <div class="mb-3 mt-3">
        <label for="uname" class="form-label">Username:</label>
        <input type="text" class="form-control" id="uname" placeholder="Enter name" name="uname" required>
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>
      <div class="mb-3">
        <label for="pwd" class="form-label">Password:</label>
        <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pswd" required>
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>
      <div class="mb-3">
        <label for="Cpwd" class="form-label"> ConfirmPassword:</label>
        <input type="Cpassword" class="form-control" id="Cpwd" placeholder="Enter confirm password" name="cpswd"
          required>
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>
      <div class="mb-3">
        <label for="Email" class="form-label">Email:</label>
        <input type="Email" class="form-control" id="Email" placeholder="Enter Email" name="Email" required>
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>
      <div class="mb-3">
        <label for="State" class="form-label">State:</label>
        <select name="" id="State" onchange="func1(this.value)"></select>
      </div>
      <div class="mb-3">
        <label for="City" class="form-label">City:</label>
        <select name="" id="City"></select>
      </div>
      <div class="mb-3">
        <label for="UserId" class="form-label">User&nbspId:</label>
        <input type="text" id="UserId" onclick="myfunc2()"></input>
      </div>
      <div class="mb-3">
        <label for="Mobile" class="form-label">Mobile:</label>
        <input type="number" id="Mobile"></input>
      </div>
      <input type="submit" onclick="submit()" id="Submit">
    </div>
    <div>
      <button type="reset" id="Update" onclick="update()" style="display: none;">Update</button>
    </div>
  </div>

  <!-- <button type="submit" onclick="submit()" class="btn btn-primary">Submit</button> -->



  <div class="container mt-3" id="table">
    <table class="table table-bordered">
      <tr>
        <th>Name</th>
        <th>Password</th>
        <th>Confirm Password</th>
        <th>Email</th>
        <th>State</th>
        <th>City</th>
        <th>UserId</th>
        <th>Mobile</th>
        <th>edit</th>
        <th>dele</th>
      </tr>
      <tbody id="demo1"></tbody>
    </table>
  </div>





  <script>
    document.getElementById('display1').style.display = "none";
    function myfunc() {
      let d = new Date(document.getElementById('date').value);
      let e = d.getFullYear();
      let f = new Date();
      let g = f.getFullYear();
      let sub = g - e;

      if (sub >= 18) {
        document.getElementById('demo').innerHTML = "Congratulations :-) you are eligible";
        document.getElementById('display1').style.display = "block";
      } else {
        document.getElementById('demo').innerHTML = "Sorry you are not eligible";
        document.getElementById('display1').style.display = "none";
      }
    }

    let str = "";
    let cityname = {
      "select": ["Select"],
      "Maharashtra": ["Select","Nagpur", "Pune", "Mumbai", "Wardha", "Gondia"],
      "Chhatisgarh": ["Select","Raipur", "Bilaspur", "sfssdf", "rhr"]
    }
    for (let x in cityname) {
      str += `<option value = "${x}"> ${x}</option>`;
    }
    document.getElementById('State').innerHTML = str;

    function func1(state) {
      // console.log(state);
      // console.log(cityname[state]);
      let str1 = "";
      for (let e of cityname[state]) {
        str1 += `<option>${e}</option>`
        // console.log(cityname[e]);
      }
      document.getElementById('City').innerHTML = str1;
    }

    function myfunc2() {
      let c = document.getElementById('uname').value;
      let d = c.substring(0, 4);
      let r = Math.floor(Math.random() * 1000);
      document.getElementById('UserId').value = d + "@" + r;
      // document.getElementById('UserId').value = d1;
    }
    document.getElementById('table').style.display = "none";


    let myarr = [], globalIndex = -1;
    function submit() {
      let obj = {};
      document.getElementById('table').style.display = "block";
      obj.Username = document.getElementById('uname').value;
      obj.Password = document.getElementById('pwd').value;
      obj.ConfirmPassword = document.getElementById('Cpwd').value;
      obj.Email = document.getElementById('Email').value;
      obj.State = document.getElementById('State').value;
      obj.City = document.getElementById('City').value;
      obj.UserId = document.getElementById('UserId').value;
      obj.Mobile = document.getElementById('Mobile').value;
      console.log(obj);
      myarr.push(obj);
      disptable();
      cleardata();
    }


    function cleardata() {
      document.getElementById('uname').value = "";
      document.getElementById('pwd').value = "";
      document.getElementById('Cpwd').value = "";
      document.getElementById('Email').value = "";
      document.getElementById('State').value = "";
      document.getElementById('City').value = "";
      document.getElementById('UserId').value = "";
      document.getElementById('Mobile').value = "";

      // let states = ""
      // for (let y in cityname) {
      //   states += `<option value = "${y}">${y}</option>`
      // }
      // document.getElementById('State').innerHTML = states;
      // document.getElementById('City').innerHTML = "<option>Select City</option>"; 
    }


    function disptable() {
      let mystr = "", i = 0;
      for (x of myarr) {
        mystr += `<tr>
          <td>${x.Username}</td>
          <td>${x.Password}</td>
          <td>${x.ConfirmPassword}</td>
              <td>${x.Email}</td>
              <td>${x.State}</td>
              <td>${x.City}</td>
              <td>${x.UserId}</td>
              <td>${x.Mobile}</td>
              <td><button type="button" onclick="edit(${i})">edit</button></td>
              <td><button type="button" onclick="del(${i})">delete</button></td>
              </tr>`;

        i++;
      }

      document.getElementById('demo1').innerHTML = mystr;
      console.log(mystr);
    }

    function edit(id) {
      console.log(id);
      globalIndex = id;
      console.log(myarr[id]);
      document.getElementById('Update').style.display = "block";
      document.getElementById('Submit').style.display = "none";

      document.getElementById('uname').value = myarr[id].Username;
      document.getElementById('pwd').value = myarr[id].Password;
      document.getElementById('Cpwd').value = myarr[id].ConfirmPassword;
      document.getElementById('Email').value = myarr[id].Email;
      document.getElementById('State').value = myarr[id].State;
      document.getElementById('City').value = myarr[id].City;
      document.getElementById('UserId').value = myarr[id].UserId;
      document.getElementById('Mobile').value = myarr[id].Mobile;
    }


    function update() {
      let obj = {};
      obj.Username = document.getElementById('uname').value;
      obj.Password = document.getElementById('pwd').value;
      obj.ConfirmPassword = document.getElementById('Cpwd').value;
      obj.Email = document.getElementById('Email').value;
      obj.State = document.getElementById('State').value; 
      obj.City = document.getElementById('City').value;
      obj.UserId = document.getElementById('UserId').value;
      obj.Mobile = document.getElementById('Mobile').value;

      myarr.splice(globalIndex, 1, obj);
      disptable();
      cleardata();
      document.getElementById('Submit').style.display = "block";
      document.getElementById('Update').style.display = "none";
    }

    function del(id) {
      myarr.splice(id, 1);
      disptable();
    }
  </script>


</body>

</html>